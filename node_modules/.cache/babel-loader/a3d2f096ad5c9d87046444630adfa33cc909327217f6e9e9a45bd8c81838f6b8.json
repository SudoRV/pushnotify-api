{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/jWTFcm/clients/pushnotify-api/src/components/CodeBlock.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport replacePlaceholders from \"../functions/replacePlaceholders\";\nimport \"../styles/CodeBlock.scss\";\n\n// Highlight code syntax\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst highlightCode = code => {\n  return code.replace(/</g, \"&lt;\") // Escape <\n  .replace(/>/g, \"&gt;\") // Escape >\n  .replace(/(\"[^\"]*\")(?=\\s*:)/g, '<span style=\"color: #df3079\">$1</span>') // Keys in red\n  .replace(/:\\s*(\"[^\"]*\"|\\d+)/g, ': <span style=\"color: #00a57d\">$1</span>'); // Values in green\n};\n\n// Language extension mapping\nconst languageExtensions = {\n  python: \"py\",\n  nodejs: \"js\",\n  javascript: \"js\",\n  java: \"java\",\n  'c++': \"cpp\",\n  c: \"c\",\n  html: \"html\",\n  css: \"css\",\n  json: \"json\",\n  xml: \"xml\"\n};\nconst CodeBlock = ({\n  className,\n  mode,\n  step,\n  language,\n  code\n}) => {\n  _s();\n  // Get correct file extension\n  const fileExtension = languageExtensions[language === null || language === void 0 ? void 0 : language.toLowerCase()] || language;\n  const fileName = `${step === null || step === void 0 ? void 0 : step.replaceAll(\" \", \"_\")}.${fileExtension}`; // Generate file name\n\n  const storageKey = React.useMemo(() => `codeblock_${step}_${language}`, [step, language]); // Unique key\n  const [isEditable, setIsEditable] = useState(false);\n  const [editableCode, setEditableCode] = useState(code);\n  const [highlightedCode, setHighlightedCode] = useState(\"\");\n  const preRef = useRef(null);\n\n  // Load saved code on mount\n  useEffect(() => {\n    const savedCode = localStorage.getItem(storageKey);\n    setEditableCode(savedCode || code);\n  }, [code, storageKey]);\n\n  // Update highlighted code when editableCode changes\n  useEffect(() => {\n    setHighlightedCode(highlightCode(editableCode));\n  }, [editableCode]);\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(replacePlaceholders(editableCode));\n  };\n  const toggleEdit = () => {\n    if (isEditable) {\n      var _preRef$current;\n      const updatedText = ((_preRef$current = preRef.current) === null || _preRef$current === void 0 ? void 0 : _preRef$current.innerText) || editableCode;\n      setEditableCode(updatedText);\n      localStorage.setItem(storageKey, updatedText); // Save changes\n    }\n    setIsEditable(prev => !prev);\n  };\n  return code === \"no response\" ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `code-container ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex jcfe aife\",\n      children: [mode !== \"minimal\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: \"auto\",\n          color: \"grey\",\n          fontSize: \"12px\"\n        },\n        className: \"file-name\",\n        children: fileName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex jcfe btn-container\",\n        children: [mode !== \"minimal\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-btn copy-btn\",\n          onClick: toggleEdit,\n          children: isEditable ? \"Save\" : \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"copy-btn\",\n          onClick: copyToClipboard,\n          children: \"Copy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      ref: preRef,\n      contentEditable: isEditable,\n      suppressContentEditableWarning: true,\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        className: \"language-json\",\n        dangerouslySetInnerHTML: {\n          __html: highlightedCode\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(CodeBlock, \"t90HQeTCQO8GghOozAtsDdYzCHE=\");\n_c = CodeBlock;\nexport default CodeBlock;\nvar _c;\n$RefreshReg$(_c, \"CodeBlock\");","map":{"version":3,"names":["React","useState","useEffect","useRef","replacePlaceholders","jsxDEV","_jsxDEV","highlightCode","code","replace","languageExtensions","python","nodejs","javascript","java","c","html","css","json","xml","CodeBlock","className","mode","step","language","_s","fileExtension","toLowerCase","fileName","replaceAll","storageKey","useMemo","isEditable","setIsEditable","editableCode","setEditableCode","highlightedCode","setHighlightedCode","preRef","savedCode","localStorage","getItem","copyToClipboard","navigator","clipboard","writeText","toggleEdit","_preRef$current","updatedText","current","innerText","setItem","prev","children","style","marginRight","color","fontSize","_jsxFileName","lineNumber","columnNumber","onClick","ref","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify-api/src/components/CodeBlock.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport replacePlaceholders from \"../functions/replacePlaceholders\";\nimport \"../styles/CodeBlock.scss\";\n\n// Highlight code syntax\nconst highlightCode = (code) => {\n  return code\n    .replace(/</g, \"&lt;\") // Escape <\n    .replace(/>/g, \"&gt;\") // Escape >\n    .replace(/(\"[^\"]*\")(?=\\s*:)/g, '<span style=\"color: #df3079\">$1</span>') // Keys in red\n    .replace(/:\\s*(\"[^\"]*\"|\\d+)/g, ': <span style=\"color: #00a57d\">$1</span>'); // Values in green\n};\n\n// Language extension mapping\nconst languageExtensions = {\n  python: \"py\",\n  nodejs: \"js\",\n  javascript: \"js\",\n  java: \"java\",\n  'c++': \"cpp\",\n  c: \"c\",\n  html: \"html\",\n  css: \"css\",\n  json: \"json\",\n  xml: \"xml\",\n};\n\nconst CodeBlock = ({ className, mode, step, language, code }) => {  \n\n  // Get correct file extension\n  const fileExtension = languageExtensions[language?.toLowerCase()] || language;\n  const fileName = `${step?.replaceAll(\" \", \"_\")}.${fileExtension}`; // Generate file name\n\n  const storageKey = React.useMemo(() => `codeblock_${step}_${language}`, [step, language]); // Unique key\n  const [isEditable, setIsEditable] = useState(false);\n  const [editableCode, setEditableCode] = useState(code);\n  \n  const [highlightedCode, setHighlightedCode] = useState(\"\");\n  const preRef = useRef(null);\n\n  // Load saved code on mount\n  useEffect(() => {\n    const savedCode = localStorage.getItem(storageKey);\n    setEditableCode(savedCode || code);\n  }, [code, storageKey]);\n\n  // Update highlighted code when editableCode changes\n  useEffect(() => {\n    setHighlightedCode(highlightCode(editableCode));\n  }, [editableCode]);\n\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(replacePlaceholders(editableCode));\n  };\n\n  const toggleEdit = () => {\n    if (isEditable) {\n      const updatedText = preRef.current?.innerText || editableCode;\n      setEditableCode(updatedText);\n      localStorage.setItem(storageKey, updatedText); // Save changes\n    }\n    setIsEditable((prev) => !prev);\n  };\n\n  return code === \"no response\" ? null : (\n    <div className={`code-container ${className}`}>\n      {/* File Name at Top Left */}\n      <div className=\"flex jcfe aife\">\n        {mode!==\"minimal\" ? <div style={{ marginRight: \"auto\", color: \"grey\", fontSize: \"12px\" }} className=\"file-name\">\n          {fileName}\n        </div> : \"\"}\n\n        <div className=\"flex jcfe btn-container\">\n          {mode !== \"minimal\" && (\n            <button className=\"edit-btn copy-btn\" onClick={toggleEdit}>\n              {isEditable ? \"Save\" : \"Edit\"}\n            </button>\n          )}\n          <button className=\"copy-btn\" onClick={copyToClipboard}>Copy</button>\n        </div>\n      </div>\n\n      <pre ref={preRef} contentEditable={isEditable} suppressContentEditableWarning={true}>\n        <code className=\"language-json\" dangerouslySetInnerHTML={{ __html: highlightedCode }}></code>\n      </pre>\n    </div>\n  );\n};\n\nexport default CodeBlock;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{messaging,getToken}from\"../files/firebase\";// ðŸ”¹ Register Service Worker\nasync function registerServiceWorker(){if(!(\"serviceWorker\"in navigator)){console.warn(\"Service Workers Not Supported.\");return null;}try{const registration=await navigator.serviceWorker.register(\"/firebase-messaging-sw.js\");console.log(\"Service Worker Registered.\");return registration;}catch(error){console.error(\"Service Worker Registration Failed: \",error.message);return null;}}async function requestNotificationPermission(){// Request Notification Permission\nconst permission=await Notification.requestPermission();if(permission!==\"granted\"){console.log(\"Notification permission denied.\");return false;}else{return true;}}async function getDeviceToken(){await registerServiceWorker();try{const token=await getToken(messaging,{vapidKey:\"BEYLH-zHd4f9kw2lZMTI5cilEv21mfNJbIZS1hlnYLcCJUI7x1RlN6cqatwX2MCx_NJF4NzC7lHPFKAT2EQHnRE\"});if(!token){console.log(\"No registration token available.\");return null;}return token;}catch(error){if(error.toString().includes(\"permission-blocked\")){return\"Notification Permission Blocked! Enable Through Site Setting\";}}}export{registerServiceWorker,requestNotificationPermission,getDeviceToken};","map":{"version":3,"names":["messaging","getToken","registerServiceWorker","navigator","console","warn","registration","serviceWorker","register","log","error","message","requestNotificationPermission","permission","Notification","requestPermission","getDeviceToken","token","vapidKey","toString","includes"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify-api/src/functions/getDeviceToken.js"],"sourcesContent":["import { \n  messaging, \n  getToken,  \n} from \"../files/firebase\";\n\n// ðŸ”¹ Register Service Worker\nasync function registerServiceWorker() {\n  if (!(\"serviceWorker\" in navigator)) {\n    console.warn(\"Service Workers Not Supported.\");\n    return null;\n  }\n\n  try {\n    const registration = await navigator.serviceWorker.register(\"/firebase-messaging-sw.js\");\n    console.log(\"Service Worker Registered.\");\n    return registration;\n  } catch (error) {\n    console.error(\"Service Worker Registration Failed: \", error.message);\n    return null;\n  }\n}\n\nasync function requestNotificationPermission(){\n    // Request Notification Permission\n    const permission = await Notification.requestPermission();\n    if (permission !== \"granted\") {\n      console.log(\"Notification permission denied.\");\n      return false;\n    }else{\n        return true;\n    }\n}\n\nasync function getDeviceToken(){\n    await registerServiceWorker();\n    \n    try{\n        const token = await getToken(messaging, {\n          vapidKey: \"BEYLH-zHd4f9kw2lZMTI5cilEv21mfNJbIZS1hlnYLcCJUI7x1RlN6cqatwX2MCx_NJF4NzC7lHPFKAT2EQHnRE\"\n        });\n\n        if (!token) {\n          console.log(\"No registration token available.\");\n          return null;\n        }\n\n        return token;\n    }catch(error){\n        if(error.toString().includes(\"permission-blocked\")){\n            return \"Notification Permission Blocked! Enable Through Site Setting\"\n        }\n    }\n}\n\n\nexport { registerServiceWorker, requestNotificationPermission, getDeviceToken };"],"mappings":"AAAA,OACEA,SAAS,CACTC,QAAQ,KACH,mBAAmB,CAE1B;AACA,cAAe,CAAAC,qBAAqBA,CAAA,CAAG,CACrC,GAAI,EAAE,eAAe,EAAI,CAAAC,SAAS,CAAC,CAAE,CACnCC,OAAO,CAACC,IAAI,CAAC,gCAAgC,CAAC,CAC9C,MAAO,KAAI,CACb,CAEA,GAAI,CACF,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAH,SAAS,CAACI,aAAa,CAACC,QAAQ,CAAC,2BAA2B,CAAC,CACxFJ,OAAO,CAACK,GAAG,CAAC,4BAA4B,CAAC,CACzC,MAAO,CAAAH,YAAY,CACrB,CAAE,MAAOI,KAAK,CAAE,CACdN,OAAO,CAACM,KAAK,CAAC,sCAAsC,CAAEA,KAAK,CAACC,OAAO,CAAC,CACpE,MAAO,KAAI,CACb,CACF,CAEA,cAAe,CAAAC,6BAA6BA,CAAA,CAAE,CAC1C;AACA,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAC,YAAY,CAACC,iBAAiB,CAAC,CAAC,CACzD,GAAIF,UAAU,GAAK,SAAS,CAAE,CAC5BT,OAAO,CAACK,GAAG,CAAC,iCAAiC,CAAC,CAC9C,MAAO,MAAK,CACd,CAAC,IAAI,CACD,MAAO,KAAI,CACf,CACJ,CAEA,cAAe,CAAAO,cAAcA,CAAA,CAAE,CAC3B,KAAM,CAAAd,qBAAqB,CAAC,CAAC,CAE7B,GAAG,CACC,KAAM,CAAAe,KAAK,CAAG,KAAM,CAAAhB,QAAQ,CAACD,SAAS,CAAE,CACtCkB,QAAQ,CAAE,yFACZ,CAAC,CAAC,CAEF,GAAI,CAACD,KAAK,CAAE,CACVb,OAAO,CAACK,GAAG,CAAC,kCAAkC,CAAC,CAC/C,MAAO,KAAI,CACb,CAEA,MAAO,CAAAQ,KAAK,CAChB,CAAC,MAAMP,KAAK,CAAC,CACT,GAAGA,KAAK,CAACS,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAC/C,MAAO,8DAA8D,CACzE,CACJ,CACJ,CAGA,OAASlB,qBAAqB,CAAEU,6BAA6B,CAAEI,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../styles/Sidebar.scss\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=_ref=>{let{isOpen,toggleSidebar}=_ref;let userData=null;try{userData=JSON.parse(window.localStorage.getItem(\"creds\"));}catch(error){console.error(\"Invalid JSON in localStorage:\",error);}const authMode=userData?\"profile\":\"Login\";//download button\nconst[installPrompt,setInstallPrompt]=useState(null);useEffect(()=>{const handleBeforeInstallPrompt=event=>{event.preventDefault();// Stop automatic prompt\nsetInstallPrompt(event);// Store event for later use\n};window.addEventListener(\"beforeinstallprompt\",handleBeforeInstallPrompt);return()=>{window.removeEventListener(\"beforeinstallprompt\",handleBeforeInstallPrompt);};},[]);const handleInstallClick=()=>{if(installPrompt){installPrompt.prompt();// âœ… Now inside user gesture\nsetInstallPrompt(null);// Remove after prompting\n}};return/*#__PURE__*/_jsxs(\"div\",{className:`sidebar ${isOpen?\"open\":\"\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"0 8px 8px 8px\",\"borderBottom\":\"1px solid #9e9e9ee1\"},className:\"flex aic jcsb\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{padding:0,margin:0,\"fontSize\":\"21px\",color:\"#007BFF\"},children:\"Quick Links\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:toggleSidebar,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:`/${authMode.toLowerCase()}`,children:userData?`ðŸ‘¤ ${userData.username}`:authMode})}),!userData&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Signup\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/testapi\",children:\"Test API\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/documentation\",children:\"Documentation\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{children:installPrompt&&/*#__PURE__*/_jsx(\"button\",{onClick:handleInstallClick,className:\"install-btn\",children:\"Install App\"})})]})]});};export default Sidebar;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","isOpen","toggleSidebar","userData","JSON","parse","window","localStorage","getItem","error","console","authMode","installPrompt","setInstallPrompt","handleBeforeInstallPrompt","event","preventDefault","addEventListener","removeEventListener","handleInstallClick","prompt","className","children","style","margin","padding","color","onClick","href","toLowerCase","username"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify-api/src/components/Sidebar.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"../styles/Sidebar.scss\";\n\nconst Sidebar = ({ isOpen, toggleSidebar }) => {\n  let userData = null;\n  try {\n    userData = JSON.parse(window.localStorage.getItem(\"creds\"));\n  } catch (error) {\n    console.error(\"Invalid JSON in localStorage:\", error);\n  }\n\n  const authMode = userData ? \"profile\" : \"Login\";\n    \n  //download button\n  const [installPrompt, setInstallPrompt] = useState(null);\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (event) => {\n      event.preventDefault(); // Stop automatic prompt\n      setInstallPrompt(event); // Store event for later use\n    };\n\n    window.addEventListener(\"beforeinstallprompt\", handleBeforeInstallPrompt);\n\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstallClick = () => {\n    if (installPrompt) {\n      installPrompt.prompt(); // âœ… Now inside user gesture\n      setInstallPrompt(null); // Remove after prompting\n    }\n  };\n\n  return (\n    <div className={`sidebar ${isOpen ? \"open\" : \"\"}`}>\n      <div style={{ margin: \"0 8px 8px 8px\", \"borderBottom\": \"1px solid #9e9e9ee1\"}} className=\"flex aic jcsb\">\n        <h2 style={{ padding: 0, margin: 0, \"fontSize\": \"21px\", color: \"#007BFF\" }}>Quick Links</h2>\n        <button className=\"close-btn\" onClick={toggleSidebar}>Ã—</button>\n      </div>      \n      <ul>\n        <li>\n          <a href={`/${authMode.toLowerCase()}`}>\n            { userData ? `ðŸ‘¤ ${userData.username}` : authMode }\n          </a>\n        </li>  \n                  \n        { !userData && (\n          <li>\n              <a href=\"/signup\">Signup</a>\n          </li>  \n        )}\n        \n        <li>\n          <a href=\"/\">Home</a>\n        </li> \n        \n        <li>\n          <a href=\"/testapi\">Test API</a>\n        </li>\n                                       \n        <li>\n          <a href=\"/documentation\">Documentation</a>\n        </li>  \n        \n        <li>\n          <a href=\"/dashboard\">Dashboard</a>\n        </li>  \n        \n        <li>\n          {/* Install App Button */}\n          {installPrompt && (\n            <button onClick={handleInstallClick} className=\"install-btn\">Install App</button>\n          )}\n        </li>\n                   \n      </ul>\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}